#LyX 1.3 created this file. For more info see http://www.lyx.org/
\lyxformat 221
\textclass article
\language english
\inputencoding auto
\fontscheme default
\graphics default
\paperfontsize default
\papersize Default
\paperpackage a4
\use_geometry 0
\use_amsmath 0
\use_natbib 0
\use_numerical_citations 0
\paperorientation portrait
\secnumdepth 3
\tocdepth 3
\paragraph_separation indent
\defskip medskip
\quotes_language english
\quotes_times 2
\papercolumns 1
\papersides 1
\paperpagestyle default

\layout Title

Rationals, Fractals and Continued Fractions
\layout Author

Linas Vepstas <linas@linas.org>
\layout Date

12 October 2004
\layout Abstract

Fractals and Continued Fractions seem to be deeply related in many ways.
 Farey numbers appear naturally in both.
 The shape of the Devil's Staircase, which occurs in phase-locking dynamic
 maps, is reminiscent of the Minkowski Question Mark Function.
 This article attempts to establish that the natural symmetry group of both
 period-doubling maps and of phase-locking maps is the modular group 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

, which expains these curious relationships.
 As a byproduct, I think we expose a fantastic fractal symmetry on the rationals
 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 themselves, and thus presumably also on 
\begin_inset Formula $\mathbb{R}$
\end_inset 

 and 
\begin_inset Formula $\mathbb{Q}_{p}$
\end_inset 

.
 This symmetry is never made use of in classical analysis, and probably
 not in non-Archimedean analysis either.
 It opens a whole set of new doors.
 An assortment of other curious observations is presented as well.
 Its a candy-store of surprises!
\layout Section

Intro
\layout Standard

THIS IS A DRAFT WORK IN PROGRESS The intro hasn't been written yet, but
 if it was, it would work like this: 
\begin_inset Quotes eld
\end_inset 

I've been running a math-art website for over a decade and it's time some
 of the math behind it got an explanation.
\begin_inset Quotes erd
\end_inset 

 So here it is.
\layout Standard

Farey Numbers show up naturally in the analysis of the Mandelbrot set.
 Farey numbers are used to label the treads of the 
\begin_inset LatexCommand \htmlurl[devil's staircase]{http://mathworld.wolfram.com/DevilsStaircase.html}

\end_inset 

, which is the set of mode-locked regions of the circle map.
 The devils staircase bears surprising resemblance to the Minkowski Question
 Mark function.
 Maybe have small pictures of minkowski and devil's staircase here.
\layout Standard

We should mention Sinai's tongue's here, which are the mode-locking regions,
 and note that they can be approximated with continued fractions, which
 is something we will show below.
\layout Standard

It is the resemblance of these pictures that leads one naturally to the
 study of continued fractions.
 Once one studies tese, one realizes that the modular group is *the* symmetry
 group of a huge class of iterated maps, and can be applied to just about
 anything that exhibits period doubling or mode locking.
 In particular, this connection implies that one should explore interesting
 things in fractals, e.g.
 Misiurewicz points, and ask what they correspond to in the modular group.
 and etc.
 
\layout Standard

To get from here to there, we'll try to take a mostly pedagogical approach,
 keeping things simple and accesible to an amateur matthematician or an
 attentive undergraduate math-major, using only basic group theory, algebra
 and analysis.
 
\layout Section

Continued Fractions and Gaps
\layout Standard

Let us start by directing the reader to te page
\begin_inset LatexCommand \htmlurl[Gap Theory]{http://www.linas.org/art-gallery/farey/continue/continue.html}

\end_inset 

, the contents of which need to be copied here.
 It provides some basic definitions that we need.
\layout Standard

Given a real number 
\begin_inset Formula $0<x<1$
\end_inset 

, a sequence of integers 
\begin_inset Formula $[a_{1},a_{2},...]$
\end_inset 

 can be found that define its continued-fraction expansion: 
\layout Standard


\begin_inset Formula \[
x=1/(a_{1}+1/(a_{2}+1/(a_{3}+...)))\]

\end_inset 

Given any x, this sequence is straightforward to compute.
 Rational numbers x always have a finite number of terms in the sequence.
 For a rational number x, there are two distinct expansions that yield the
 same value: 
\layout Standard


\begin_inset Formula \[
x_{+}=[a_{1},a_{2},...,a_{N}]\]

\end_inset 

and 
\layout Standard


\begin_inset Formula \[
x_{-}=[a_{1},a_{2},...,a_{N}-1,1]\]

\end_inset 

In the following text, we make a simplifying notational confusion: we use
 the same symbols to denote a sequence and its value when expressed as a
 continued fraction.
 Thus, for the above sequences, we may write 
\begin_inset Formula $x=x_{-}=x_{+}$
\end_inset 

.
 It will hopefully be obvious which is which.
 
\layout Standard

Given a rational 
\begin_inset Formula $x$
\end_inset 

 and an arbitrary complex number w, define new sequences: 
\layout Standard


\begin_inset Formula \[
x_{+}(w)=[a_{1},a_{2},...,a_{N},1/w]\]

\end_inset 

and
\layout Standard


\begin_inset Formula \[
x_{-}(w)=[a_{1},a_{2},...,a_{N}-1,1,1/w]\]

\end_inset 

These two functions are analytic in 
\begin_inset Formula $w$
\end_inset 

, almost trivally so, and in fact can be written as 
\begin_inset Formula $(a+bw)/(c+dw)$
\end_inset 

 for some integers 
\begin_inset Formula $a,b,c,d$
\end_inset 

 (we will present a construction for obtaining these integers in a later
 section xxx todo).
 Thus, general analytic manipulations are perfectly well-defined on these
 functions.
 Clearly, 
\layout Standard


\begin_inset Formula \[
\lim_{w\rightarrow0}x_{-}(w)=\lim_{w\rightarrow0}x_{+}(w)=x\]

\end_inset 

Differentiation w.r.t.
 
\begin_inset Formula $w$
\end_inset 

 provides a handy tool for constructing various interesting things and proving
 various limits.
 We give an exact expression for these derivatives below.
 Although we've introduced w by appending it to the last term of a rational
 expansion, we could, if we wanted, introduce w into the N'th term of an
 irrational expansion.
 Most of the statements we make below are for rationals.
 This is in part because treating the irrationals is a bit harder and confusing,
 both in these formulas, and in their implementation as algorithms.
 
\layout Standard

There is also an even-odd symmetry for 
\begin_inset Formula $x(w)$
\end_inset 

 that we should be aware of, as it plays another important role in the theory.
 As we point out above, for any given sequence, there is a + and a - generalizat
ion.
 But what if the sequence is already 
\begin_inset Formula $x_{-}$
\end_inset 

 and we choose the - expansion? Then we get 
\begin_inset Formula \[
x_{--}=[a_{1},a_{2},...,a_{N}-1,0,1]\]

\end_inset 

This expansion invokes a symmetry on 
\begin_inset Formula $x_{-}(w)$
\end_inset 

: 
\begin_inset Formula \[
x_{--}(w)=[a_{1},a_{2},...,a_{N}-1,0,1,1/w]=x_{+}(w)\]

\end_inset 

Thus, we see that a double-expansion is either idempotent or alternating.
 To be pedantic, we can complete this with the other three expressions:
 
\begin_inset Formula $x_{++}(w)=x_{+}(w)$
\end_inset 

 and 
\begin_inset Formula $x_{-+}(w)=x_{+-}(w)=x_{-}(w)$
\end_inset 

.
 In other words, a double-expansion reflects back, and, in this sense, 
\begin_inset Formula $x_{+}$
\end_inset 

and 
\begin_inset Formula $x_{-}$
\end_inset 

 are unique.
 
\layout Standard

If one needs to take differences, e.g.
 for derivatives, the even-odd expansion is more useful: Define 
\begin_inset Formula $x_{e}(w)$
\end_inset 

 and 
\begin_inset Formula $x_{o}(w)$
\end_inset 

 as follows: 
\begin_inset Formula \[
x_{e}(w)=\left\{ \begin{array}{cc}
x_{+}(w) & if\; N\; even\\
x_{-}(w) & if\; N\; odd\end{array}\right.\]

\end_inset 

and
\layout Standard


\begin_inset Formula \[
x_{o}(w)=\left\{ \begin{array}{cc}
x_{-}(w) & if\; N\; even\\
x_{+}(w) & if\; N\; odd\end{array}\right.\]

\end_inset 

These two have nice order-preserving properties: if 
\begin_inset Formula $w$
\end_inset 

 is a positive real, then 
\begin_inset Formula \[
x_{o}(w)<x_{e}(w)\]

\end_inset 

and, for negative real 
\begin_inset Formula $w$
\end_inset 

, 
\begin_inset Formula \[
x_{o}(w)>x_{e}(w)\]

\end_inset 

These two functions also have idempotent or parity-swapping identities:
 
\begin_inset Formula \[
x_{e+}(w)=x_{e}(w)\;\;\; and\;\;\; x_{e-}(w)=x_{o}(w)\;\;\; and\;\;\; x_{o+}(w)=x_{o}(w)\;\;\; and\; x_{o-}(w)=x_{e}(w)\]

\end_inset 

 
\begin_inset Formula \[
x_{ee}(w)=x_{e}(w)\;\;\; and\;\;\; x_{eo}(w)=x_{o}(w)\;\;\; and\;\;\; x_{oe}(w)=x_{e}(w)\;\;\; and\;\;\; x_{oo}(w)=x_{o}(w)\]

\end_inset 


\layout Standard


\begin_inset Formula \[
x_{+e}(w)=x_{e}(w)\;\;\; and\;\;\; x_{+o}(w)=x_{o}(w)\;\;\; and\;\;\; x_{-e}(w)=x_{e}(w)\;\;\; and\;\;\; x_{-o}(w)=x_{o}(w)\]

\end_inset 


\layout Subsection

The Gap
\layout Standard

Let use define the 
\shape italic 
gap
\shape default 
 as
\begin_inset Formula \[
\Gamma_{x}(w)=x_{e}(w)-x_{o}(w)\]

\end_inset 

This gap function is, of course, highly discontinuous in 
\begin_inset Formula $x$
\end_inset 

 and analytic in 
\begin_inset Formula $w$
\end_inset 

.
 It is not hard to discover that for a rational 
\begin_inset Formula $p/q$
\end_inset 

 reduced so that 
\begin_inset Formula $p$
\end_inset 

 and 
\begin_inset Formula $q$
\end_inset 

 are coprime (have no common factors), and 
\begin_inset Formula $w\leq1$
\end_inset 

, the gaps take the form 
\layout Standard


\begin_inset Formula \[
\Gamma_{p/q}(w)=\frac{w}{q^{2}}\left[2-w+\frac{w^{2}}{2}+\frac{w^{2}}{2}T_{p/q}(w)\right]\]

\end_inset 

 where the teeth 
\begin_inset Formula $T$
\end_inset 

 are bounded: 
\begin_inset Formula $\left|T_{p/q}(w)\right|<1$
\end_inset 

 (when 
\begin_inset Formula $w\leq1$
\end_inset 

).
 For 
\begin_inset Formula $w=0,$
\end_inset 

we have 
\begin_inset Formula $0\leq T_{p/q}(0)\leq1$
\end_inset 

.
 A derivation of these results are given in a later section.
 
\layout Standard

The teeth at first appear to be random: below follows a scatterplot showing
 
\begin_inset Formula $T$
\end_inset 

 for a thousand randomly generated small-ish rationals.
\layout Standard


\begin_inset Graphics
	filename gappy-psmallrand.png

\end_inset 


\layout Standard

However, closer examination reveals some surprising details.
 Here's the same picture, but this time showing only the rationals 
\begin_inset Formula $p/q=[1..719]/720$
\end_inset 

 (all rationals with numerator between 1 and 719 and denominator of 720:
\layout Standard


\begin_inset Graphics
	filename gappy-p720.png

\end_inset 


\layout Standard

Note that 720 = 6! (six factorial) and that similar but denser images appear
 for higher factorials: Here's one for 
\begin_inset Formula $7!$
\end_inset 

 that is, 
\begin_inset Formula $p/q=[1..5039]/5040$
\end_inset 

:
\layout Standard


\begin_inset Graphics
	filename gappy-p5040.png

\end_inset 


\layout Standard

Notice that a Moire pattern of fringes seems to be forming at 
\begin_inset Formula $x=1/2$
\end_inset 

.
 (Homework: describe the rationals that make up the parabolas.
 The solution is presented in a later section below.).
 The factorial in the denominator seems important: the picture for the denominat
or 
\begin_inset Formula $2\cdot3\cdot5\cdot7\cdot11=2310$
\end_inset 

 blurs out the features, and mostly looks much more random, as shown below:
\layout Standard


\begin_inset Graphics
	filename gappy-p2310.png

\end_inset 


\layout Standard

Now tht we know what sort of pattern to look for, we can find the cross-bars
 in this picture, for a denominator of 1024:
\layout Standard


\begin_inset Graphics
	filename gappy-p1024.png

\end_inset 


\layout Standard

The analogous picture for a denominator consisting of powers of 3 is less
 distinct.
 Pictures for prime denominators appear considerably more random, although
 containing hints of a different kind of structure.
 For example, here is a picture with denominator 1023:
\layout Standard


\begin_inset Graphics
	filename gappy-p1023.png

\end_inset 


\layout Standard

The next picture below is a scatterplot showing all rationals with denominators
 less than 200.
 This now clearly exhibits a fantastic self-similar fractal filigree:
\layout Standard


\begin_inset Graphics
	filename gap-lattice.png

\end_inset 

 
\layout Standard

It would be interesting to specify the shapes of all the various bifurcating
 curves that seem to appear in this latticework.
 Note that because a curve can seemingly bifurcate into another curve in
 many places, listing all of them would be a trick.
\layout Standard

There are more interesting things to be seen, but first we should provide
 a simpler expression for 
\begin_inset Formula $T_{p/q}(w)$
\end_inset 

 at 
\begin_inset Formula $w=0$
\end_inset 

.
 Recall that for any fixed rational 
\begin_inset Formula $p/q$
\end_inset 

, that 
\begin_inset Formula $T_{p/q}(w)$
\end_inset 

 is of the form 
\begin_inset Formula $(aw+b)/(cw+d)$
\end_inset 

 for some integers 
\begin_inset Formula $a,b,c,d$
\end_inset 

.
 For any given, fixed 
\begin_inset Formula $p/q$
\end_inset 

, there exists an 
\begin_inset Formula $\epsilon>0$
\end_inset 

 such that there are no poles in 
\begin_inset Formula $T_{p/q}(w)$
\end_inset 

 in the disk of radius 
\begin_inset Formula $\epsilon$
\end_inset 

 around 
\begin_inset Formula $w=0$
\end_inset 

 (Homework: prove this), and thus its analytic on this disk.
 This justifies an expansion in 
\begin_inset Formula $w$
\end_inset 

; we'll give an exact expression in a later section, showing that these
 manipulations are safe.
 For the continued fraction 
\begin_inset Formula $x_{+}(w)=[a_{1},a_{2},...a_{N},1/w]$
\end_inset 

 we write the 
\begin_inset Formula $k$
\end_inset 

'th partial convergent as 
\begin_inset Formula $r_{k}(w)=s_{k}+wt_{k}+w^{2}u_{k}+w^{3}v_{k}+...$
\end_inset 

 which obeys the recurrance relation 
\begin_inset Formula $r_{k-1}(w)=a_{k-1}+1/r_{k}(w)$
\end_inset 

 .
 Substituting, we get the explicit recurrance relations for each term:
\begin_inset Formula \[
s_{k-1}=a_{k-1}+1/s_{k}\]

\end_inset 


\begin_inset Formula \[
t_{k-1}=\frac{-t_{k}}{s_{k}^{2}}\]

\end_inset 


\begin_inset Formula \[
u_{k-1}=\frac{-u_{k}}{s_{k}^{2}}+\frac{t_{k}^{2}}{s_{k}^{3}}\]

\end_inset 


\begin_inset Formula \[
v_{k-1}=\frac{-v_{k}}{s_{k}^{2}}+2\frac{t_{k}u_{k}}{s_{k}^{3}}+\frac{-t_{k}^{3}}{s_{k}^{4}}\]

\end_inset 

 which are numerically quite tractable.
 The boundary conditions are given by 
\begin_inset Formula $r_{+,N}(w)=a_{N}+w$
\end_inset 

 for the 
\begin_inset Formula $x_{+}$
\end_inset 

expansion, and 
\begin_inset Formula $r_{-,N}(w)=a_{N}-w+w^{2}-w^{3}$
\end_inset 

 for the 
\begin_inset Formula $x_{-}$
\end_inset 

expansion.
 We add 
\begin_inset Formula $a_{0}\equiv0$
\end_inset 

 to terminate at the other end.
 Defining even and odd variants as before, we equate the gap
\begin_inset Formula \[
\Gamma_{p/q}(w)=w\left(t_{0}^{e}-t_{0}^{o}\right)+w^{2}\left(u_{0}^{e}-u_{0}^{o}\right)+w^{3}\left(v_{0}^{e}-v_{0}^{o}\right)\]

\end_inset 

 Its becomes straightforward to numerically verify that 
\begin_inset Formula $t_{0}^{e}-t_{0}^{o}=2/q^{2}$
\end_inset 

 and 
\begin_inset Formula $u_{0}^{e}-u_{0}^{o}=-1/q^{2}$
\end_inset 

 as we've noted before (Homework: provide a general proof).
 Far, far more curious is 
\begin_inset Formula $T_{p/q}(0)=2q^{2}\left(v_{0}^{e}-v_{0}^{o}\right)-1$
\end_inset 

, of which we drew some pictures above.
 The pictures below will provide some more surprises.
 The first is a scatterplot color-coded as a measure: it shows the distribution
 of 
\begin_inset Formula $T_{p/q}\equiv T_{p/q}(0)$
\end_inset 

 for all rationals with denominator 
\begin_inset Formula $q\leq1800$
\end_inset 

.
 Black indicates that there were few or no hits to that pixel, then blue,
 greeen, yellow and red to denote lots of points hit that pixel.
 Just as the earlier graphs, shown is a perfect unit square.
\layout Standard


\begin_inset Graphics
	filename gap-dist-1800-bola.png

\end_inset 


\layout Standard

For reference, overdrawn over the image is the parabola.
 The vertical black stripes occur at the Farey numbers, and appear to be
 ordered in size according to the Farey tree (
\shape italic 
i.e.

\shape default 
 the largest stripe is at 
\begin_inset Formula $x=1/2$
\end_inset 

, the next largest at 
\begin_inset Formula $x=1/3$
\end_inset 

, 
\begin_inset Formula $x=2/3$
\end_inset 

 and the next smaller ones at 
\begin_inset Formula $x=1/4$
\end_inset 

 and 
\begin_inset Formula $x=2/5$
\end_inset 

 
\shape italic 
etc.
\shape default 
).
 The progression of the horizontal bands are clearly related to the Farey
 tree through the parabola.
 Since the parabola gives a rational out when fed one in, we see that we've
 discovered a different tree of rationals that's related to the Farey tree.
 One can see that any ratio of polynomials will this give a tree of rationals.
 The Farey Tree (or Stern-Brocot Tree) is discussed in greater detail later.
\layout Standard

The filigree pattern exists only for small rationals.
 If we start sampling larger rationals, the distribution becomes smooth.
 The picture below shows a random sampling of rationals with denominators
 less than 2 million.
 The image is a bit grainy because the sample size is not large enough;
 the graininess goes away with larger sample sizes.
 
\layout Standard


\begin_inset Graphics
	filename gap-dist-rand.png

\end_inset 


\layout Standard

This picture tells us something that is surprising: this function is space-filli
ng and dense; it has no holes or islands; it has a fractal measure of 2.0.
 Even in the land of fractals, this is fairly unusual, as this function
 is, after all, not some self-similar curve, but rather a 'plain-old' map
 from the unit interval to the unit interval.
 By 'dense', I mean the traditional Cauchy-sequence notion of density: for
 any real values 
\begin_inset Formula $x,y\in[0,1]$
\end_inset 

 and positive 
\begin_inset Formula $\varepsilon>0$
\end_inset 

, we can find a rational 
\begin_inset Formula $p/q$
\end_inset 

 such that 
\begin_inset Formula $\left|x-p/q\right|<\varepsilon$
\end_inset 

 and 
\begin_inset Formula $\left|y-T_{p/q}\right|<\varepsilon$
\end_inset 

 .
 Of course, a computer generated picture is not a proof, but a proof is
 straight-forward, and is discussed below.
 I am not aware of any other map that has this property.
 
\layout Standard

The distribution of the gaps 
\begin_inset Formula $y=T_{p/q}$
\end_inset 

 can be easily found to be 
\begin_inset Formula $1/2\sqrt{y}$
\end_inset 

 which is sharply peaked at 
\begin_inset Formula $y=0$
\end_inset 

: this is the thin red stripe at the bottom of the above picture.
 
\layout Subsection

The Gap for Finite w
\layout Standard

One can get a better idea of the behaviour of 
\begin_inset Formula $x_{e}(w)$
\end_inset 

 by graphing it, as a function of 
\begin_inset Formula $w$
\end_inset 

, for a number of representative values of 
\begin_inset Formula $x$
\end_inset 

.
 From the above analysis, we should suspect that for 
\begin_inset Formula $x=p/q$
\end_inset 

, the leading 
\begin_inset Formula $w$
\end_inset 

 terms are of magnitude 
\begin_inset Formula $1/q^{2}$
\end_inset 

 which would make it hard to directly compare different values of 
\begin_inset Formula $x.$
\end_inset 

 So instead, we introduce a 'normalized' variant: 
\begin_inset Formula $\nu_{e}(x=p/q,w)=x+q^{2}[x_{e}(w)-x]$
\end_inset 

 and similarly 
\begin_inset Formula $\nu_{o}(x,w)$
\end_inset 

.
 This is done below, for 200 evenly spaced values ov 
\begin_inset Formula $x$
\end_inset 

.
 On the horizontal axis is 
\begin_inset Formula $x$
\end_inset 

 running from 0 to 1, and along the vertical axis, 
\begin_inset Formula $w$
\end_inset 

, from 0 at bottom to 1 at top:
\layout Standard


\begin_inset Graphics
	filename gap-x-even-thin.png

\end_inset 


\layout Standard

Clearly, it can be seen that 
\begin_inset Formula $\nu_{e}(x,w)$
\end_inset 

 is a monotonically increasing function of 
\begin_inset Formula $w$
\end_inset 

, which follows easily by examining the partial sums: if 
\begin_inset Formula $w<z$
\end_inset 

 then 
\begin_inset Formula $r_{N}(w)=a_{N}+w<r_{N}(z)=a_{N}+z$
\end_inset 

 and 
\begin_inset Formula $r_{N-1}(w)=a_{N-1}+1/r_{N}(w)>r_{N-1}(z)=a_{N-1}+1/r_{N}(z)$
\end_inset 

.
 Each iteration will reverse the inequality; but 
\begin_inset Formula $\nu_{e}$
\end_inset 

 by definition has an even number of terms, and thus 
\begin_inset Formula $\nu_{e}(w)<\nu_{e}(z)$
\end_inset 

.
 QED.
 Note this would be extremely non-obvious if one just considered that 
\begin_inset Formula $\nu$
\end_inset 

 is a rational polynomial.
\layout Standard

One finds a mirror symmetry between the even and odd forms: 
\begin_inset Formula $\nu_{o}(x,w)=-\nu_{e}(1-x,w)$
\end_inset 

, which is also not quite obvious, given the construction.
 Its is clear from this picture that the leading 
\begin_inset Formula $w$
\end_inset 

 and 
\begin_inset Formula $w^{2}$
\end_inset 

 terms dominate.
 We can guess at the form of these terms: we define 
\begin_inset Formula $\mu_{e}(x,w)=\nu_{e}(x,w)-w+w^{2}-w^{3}/2$
\end_inset 

 and graph it below, exposing the randomness of the cubic and higher terms
 directly.
 
\layout Standard


\begin_inset Graphics
	filename gap-x-even-thin-nolead.png

\end_inset 


\layout Standard

The seeming parallel-ness of some trajectories is an optical illusion, due
 to the pixelization of the picture.
 There are more pictures, with a greater numnber of strands, at the 
\begin_inset LatexCommand \htmlurl[Gap Room]{http://www.linas.org/art-gallery/farey/gap-room/gap-room.html}

\end_inset 

.
\layout Subsection

Exact Expressions for the Gap Size
\layout Standard

The size of the gap can be given an exact expression in terms of the convergents
 of the continued fraction.
 Performing this excercise will help explain some of the fractal behaviour
 seen in the pervious sections.
 
\layout Standard

One gets the convergent of a continued fraction by evaluating the fraction
 only up to the n'th term, and expressing it as a ratio 
\begin_inset Formula $p_{n}/q_{n}$
\end_inset 

.
 The convergents can be expressed recursively:
\begin_inset Formula \[
p_{n}=a_{n}p_{n-1}+p_{n-2}\]

\end_inset 

 and 
\begin_inset Formula \[
q_{n}=a_{n}q_{n-1}+q_{n-2}\]

\end_inset 

 where we anchor the iteration by defining 
\begin_inset Formula $p_{-2}=0$
\end_inset 

 and 
\begin_inset Formula $p_{-1}=1$
\end_inset 

 and 
\begin_inset Formula $q_{-2}=1$
\end_inset 

 and 
\begin_inset Formula $q_{-1}=0$
\end_inset 

.
 Iterating, the next few terms are 
\begin_inset Formula $p_{0}=a_{0}$
\end_inset 

 and 
\begin_inset Formula $p_{1}=a_{0}a_{1}+1$
\end_inset 

 and 
\begin_inset Formula $q_{0}=1$
\end_inset 

 and 
\begin_inset Formula $q_{1}=a_{1}$
\end_inset 

.
 Here we adopted a slightly extended notation from before, defining 
\begin_inset Formula $a_{0}$
\end_inset 

 as the integer part of the fraction; 
\shape italic 
i.e.

\shape default 
 
\begin_inset Formula $x=a_{0}+1/(a_{1}+1/(a_{2}+...))\equiv[a_{0};a_{1},a_{2},...]$
\end_inset 

.
 We then have the convergent:
\begin_inset Formula \[
[a_{0};a_{1},a_{2},...,a_{N}]=\frac{p_{N}}{q_{N}}\]

\end_inset 

 Note also that for any 
\begin_inset Formula $y\in\mathbb{R}$
\end_inset 

, we have 
\begin_inset Formula \[
[a_{0};a_{1},a_{2},...,a_{N},y]=\frac{p_{N}y+p_{N-1}}{q_{N}y+q_{N-1}}\]

\end_inset 

 Note that the convergents have the property 
\begin_inset Formula $q_{n}p_{n-1}-p_{n}q_{n-1}=\left(-1\right)^{n}$
\end_inset 

.
 We can use the above to provide exact expressions for 
\begin_inset Formula $x_{+}(w)$
\end_inset 

 and 
\begin_inset Formula $x_{-}(w)$
\end_inset 

.
 These are:
\begin_inset Formula \[
x_{+}(w)=\frac{p_{N}}{q_{N}}+\left(-1\right)^{N}\frac{w}{q_{N}^{2}\left(1+wq_{N-1}/q_{N}\right)}\]

\end_inset 

 and 
\begin_inset Formula \[
x_{-}(w)=\frac{p_{N}}{q_{N}}-\left(-1\right)^{N}\frac{w}{q_{N}^{2}\left(1+w\left(1-q_{N-1}/q_{N}\right)\right)}\]

\end_inset 

 We can then compute the gap explicitly as 
\begin_inset Formula \[
\Gamma_{x}(w)=x_{e}(w)-x_{o}(w)=\frac{w}{q_{N}^{2}}\left[\frac{2+w}{1+w+w^{2}\frac{q_{N-1}}{q_{N}}\left(1-\frac{q_{N-1}}{q_{N}}\right)}\right]\]

\end_inset 

 where no approximation has been made.
 Expanding the denominator, we get 
\begin_inset Formula \[
T_{p/q}(0)=1-4\frac{q_{N-1}}{q_{N}}\left(1-\frac{q_{N-1}}{q_{N}}\right)\]

\end_inset 

 From this expression, the boundedness of 
\begin_inset Formula $T$
\end_inset 

 follows immediately; this comes from the fact that 
\begin_inset Formula $2q_{N-1}\leq q_{N}$
\end_inset 

.
 
\layout Subsection

Proof that Gaps are Cauchy-dense on the Unit Square
\layout Standard

The incredible 'randomness' of the distribution, as well as its Cauchy-sequence-
density on the unit square can now be easily understood.
 To do this, consider the iteration of the map 
\begin_inset Formula \[
h(x)=\frac{1}{x}-\left\lfloor \frac{1}{x}\right\rfloor \]

\end_inset 

 This map has the property that lops off the leading term of the continued
 fraction: 
\begin_inset Formula $h([a_{1},a_{2},...])=[a_{2},a_{3},...]$
\end_inset 

 .
 Iterating this map clearly gets one further and further into the continued
 fraction, and it is clear that two points that start arbitrarily close
 together will have orbits under this map that eventually become uncorrelated.
 That is, this map clearly has a positive Lyapunov exponent for all irrationals.
 (Homework: compute the Lyapunov exponent for this map).
 
\layout Standard

We can gain some intuition by comparing this map to the Bernoulli map 
\begin_inset Formula \[
b(x)=2x-\left\lfloor 2x\right\rfloor \]

\end_inset 

 which has the property of lopping off the leading digit of a binary expansion
 of 
\begin_inset Formula $x$
\end_inset 

.
 Again, two irrationals that start out arbitrarily close together will eventuall
y have binary expansions that are uncorrelated and completly 'random'.
 Even though one may know the first 
\begin_inset Formula $N$
\end_inset 

 digits of the expansion, one cannot 'predict' the next digit of the expansion;
 and this is what we mean when we say 'random' or 'uncorrelated'.
 
\layout Standard

As a side-note, I can't help noticing an interesting paradox concerning
 the idea of 'randomness' in deterministic-chaos problems.
 We would like to be able to say, that, when considering the entire set
 of reals on the unit interval, that, when examining the 
\begin_inset Formula $N$
\end_inset 

'th binary digit in the expansion, that 
\begin_inset Formula $N$
\end_inset 

'th digit is completely random, and is uniformly distributed (equipartition
 of probability), with the probability of the digit being 0 being 1/2 and
 the probability of it being 1 is also 1/2.
 But of course, this statement is patently false, and therein lies the paradox.
 We can, of course, trivially and exactly predict the 
\begin_inset Formula $N$
\end_inset 

'th digit, as the Bernoulli process is completely deterministic.
 The 
\begin_inset Formula $N$
\end_inset 

'th digit is trivially 
\begin_inset Formula $e_{N}(x)=\left\lfloor 2^{N}x\right\rfloor -2\left\lfloor 2^{N-1}x\right\rfloor $
\end_inset 

 and 
\begin_inset Formula $e_{N}(x)$
\end_inset 

 is a square-toothed comb.
 One has this problem even for 
\begin_inset Formula $N$
\end_inset 

 getting very large, and approaching infinity.
 
\layout Standard

I suppose there are two ways out of this paradox.
 One way out is to say something like 
\begin_inset Quotes eld
\end_inset 

Yea, Verily, Chooseth two Irrationals whose Binary Expansions are Completely
 Uncorrelated
\begin_inset Quotes erd
\end_inset 

, which sounds like an invocation of the Axiom of Choice.
 Indeed, the set of computable numbers is countable, and is of measure zero
 on the real number line.
 In order to compute the 
\begin_inset Formula $N$
\end_inset 

'th digit of 
\begin_inset Formula $x$
\end_inset 

, one must somehow already 'know' 
\begin_inset Formula $x$
\end_inset 

.
 Since the set of of unknowable numbers has measure one on the unit interval
 of reals, one arguably must 'choose' if one is to get a truly 'random'
 number.
 
\layout Standard

The other way out of the paradox is far more mundane, and seems constructive,
 and that is to apply shop-worn statistical methods.
 After all, chaos occurs in numerical simulations, and not in set theory.
 Chaos is a computational phenomenon.
 What we can say is that for any given real 
\begin_inset Formula $y$
\end_inset 

 and 
\begin_inset Formula $\delta>0$
\end_inset 

 and 
\begin_inset Formula $\varepsilon>0$
\end_inset 

, one can always find an integer 
\begin_inset Formula $N$
\end_inset 

 such that the average value of 
\begin_inset Formula $e_{N}$
\end_inset 

 approaches 1/2 on the interval: that is, 
\begin_inset Formula \[
\left|\frac{1}{2}-\int_{y}^{y+\delta}e_{N}(x)dx\right|<\varepsilon\]

\end_inset 

 
\layout Standard

Now, to move the conversation back to the iterated continued fraction map,
 and that proof.
 Blah Blah Blah.
 To-Do: Provide the proof we promised.
\layout Subsection

The Gauss Kuz'min Wirsing Operator
\layout Standard

Note that a standard way of analysing the dynamics of deterministic chaotic
 maps is to compute the Frobenius-Perron operator of the map, and solve
 for its eigenvalues and eigenfunctions.
 For the continued-fraction map, the Frobenius-Perron operator is known
 as the Gauss-Kuz'min-Wirsing operator.
 Blah blah blah.
 Write some more here.
\layout Standard

Note that I have another paper ready to go on the GKW and how it and the
 Riemann Zeta are intertwined.
 Its interesting that this is another connection between the Riemann Zeta
 and chaotic dynamics.
 I suspect that the relationship is very deep indeed.
\layout Subsection

The Parabolas in the Distribution
\layout Standard

The cause of the principal parabola seen in the pictures is now also clear.
 Blah Blah Blah write this section too.
 All work and no play makes Jack a dull boy...
\layout Standard

The main parabola that is visible is at 
\begin_inset Formula $T_{p/q}(0)=4(x-1/2)^{2}$
\end_inset 

, which we can solve for directly to obtain 
\begin_inset Formula $x=q_{N-1}/q_{N}$
\end_inset 

 and 
\begin_inset Formula $x=1-q_{N-1}/q_{N}$
\end_inset 

 .
 Recalling that by definition, 
\begin_inset Formula $x\equiv p/q\equiv p_{N}/q_{N}$
\end_inset 

, we find that the rationals on the main parabola are given by 
\begin_inset Formula $p_{N}=q_{N-1}$
\end_inset 

 and 
\begin_inset Formula $p_{N}=q_{N}-q_{N-1}$
\end_inset 

.
 Blah blah blah solve these equations.
\layout Standard

There are other parabolas visible as well, offset on other fractions.
 Describe these as well.
 Why are these rationals interesting? 
\layout Subsection

Iteration
\layout Standard

Note that 
\begin_inset Formula $x_{+}(w)$
\end_inset 

 is the concatenation operator for continued fractions.
 If 
\begin_inset Formula $x=[a_{1},a_{2},...,a_{N}]$
\end_inset 

 and 
\begin_inset Formula $w=[b_{1},b_{2},...]$
\end_inset 

 then 
\begin_inset Formula $x_{+}(w)=[a_{1},a_{2},...,a_{N},b_{1},b_{2},...]$
\end_inset 

.
 Thus, 
\begin_inset Formula $x_{+}$
\end_inset 

 can be used to construct code-words.
 Iterating 
\begin_inset Formula $x_{+}(w)$
\end_inset 

 obviously does not yeild any periodic orbits, and instead converges to
 a quadratic irrational that is the solution to 
\begin_inset Formula $y=x_{+}(y)$
\end_inset 

.
 From the theory of Pellian equations, if 
\begin_inset Formula $a_{N}$
\end_inset 

 is even, then 
\begin_inset Formula $y=-a_{N}/2+\sqrt{D}$
\end_inset 

 for some integer 
\begin_inset Formula $D$
\end_inset 

 where 
\begin_inset Formula $a_{N}^{2}/4+a_{N}+1>D>a_{N}^{2}/4$
\end_inset 

.
 
\layout Section

Distributions Of Rationals on the Unit Interval
\layout Standard

The distribution of rationals on the unit interval is filled with surprises.
 In High-School or College, one is told that the rationals are distributed
 
\begin_inset Quotes eld
\end_inset 

uniformly
\begin_inset Quotes erd
\end_inset 

 on the unit interval.
 If one considers the entire set 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

, then yes, this is true.
 But if one considers just subsets, such as the subset of rationals with
 
\begin_inset Quotes eld
\end_inset 

small
\begin_inset Quotes erd
\end_inset 

 denominators, then the distribution is far from uniform and full of counter-int
uitive surprises, some of which we explore below.
 These surprises imply that extrapolating from finite results to the set
 of all rationals is a dangerous process (and here you thought the Axiom
 of Choice was Scary).
 
\layout Subsection

Simple Counting
\layout Standard

Lets begin by listing all of the fractions with denomintors from 1 to N,
 and numerators between 0 and the denomintor.
 Clearly, there many of these fractions will be reducible, i.e.
 the numerator and denominator have common factors, and thus, in this simple-min
ded enumeration, some rationals are counted multiple times.
 In particular, we'll count 0 over and over again: it will be in the list
 as 0/1, 0/2, 0/3 and so on.
 Likewise, 1 will appear in this list over and over: as 1/1, 2/2, 3/3, etc.
 We'll have 1/2 also appearing as 2/4, 3/6 and so on.
 So lets take a look at this in detail.
 The graph below shows this enumeration, up to a denominator of N=4000,
 carved up into 720 bins, and normalized to unit density.
 That is, if 
\begin_inset Formula $n/720<p/q<(n+1)/720$
\end_inset 

, then we assign the fraction 
\begin_inset Formula $p/q$
\end_inset 

 to the 
\begin_inset Formula $n$
\end_inset 

'th bin.
 We might expect this graph to have a huge peak at the bin n=360: after
 all, this bin will hold 1/2 and 2/4 and 3/6 and in general should have
 a big surfiet coming from the degeneracy at 1/2.
 One mght expect peaks at 1/3, and 1/4 and etc, but smaller.
 Here's the graph.
\layout Standard

Here's the density graph of the rationals that occur in this enumeration,
 binned into 720 bins, up to a denominator of N=4000:
\layout Standard


\begin_inset Graphics
	filename rdist-720-4K.png

\end_inset 


\layout Standard

Indeed, there is a big upwards spike at 1/2.
 But there seems to be a big downwards spike just below, at bin 359, seemingly
 of equal and opposite size.
 This is the first surprise.
 Why is there a deficit at bin 359? We can try to get a better picture of
 things by dividing up the enumaration into 719 bins (note that 719 is prime).
 This is results in the next surprise: the graph is flat.
 See below:
\layout Standard


\begin_inset Graphics
	filename rdist-719-4K.png

\end_inset 


\layout Standard

How can this graph possibly be flat? We should be massively overcounting
 at 1/2, there should be a big peak there.
 Maybe its drowned out by the blips at 0 and 1, so lets graph the same data,
 but rescale more appropriately.
 This is shown below:
\layout Standard


\begin_inset Graphics
	filename rdist-719-4K-rescale.png

\end_inset 


\layout Standard

Hmm.
 Curious.
 There is indeed a peak at 1/2.
 But there are also deficits symmetrically arranged at either side.
 This is still confusing.
 Well, at any rate, lets compare this to the distribution we 
\begin_inset Quotes eld
\end_inset 

should have been using all along
\begin_inset Quotes erd
\end_inset 

, where we eliminate all fractions that are reducible.
 That is, we should count each rational only once.
 This is graphed below, again, binned into 719 bins, for all irreducible
 rationals with denominator less than or equal to 4000:
\layout Standard


\begin_inset Graphics
	filename rdist-719-4K-irred.png

\end_inset 


\layout Standard

Wow! We no longer have a peak at 1/2.
 In fact, it sure gives the impression that we are undercounting at 1/2!
 Holy Banach-Tarski, Batman! What does it mean? Note also the graph is considera
bly noiser.
 Compare the scales on the left for a relative measure of the noise.
 Part, but not all, of the noise is due to the smaller sample size: we are
 counting fewer fractions: 4863602 are irreducible out of the simple list
 of 8002000.
 However, matching the sample sizes does not seem to significantly reduce
 the small-amplitude noise: qualitatively speaking, the binning of irreducible
 fractions seems much noisier.
\layout Standard

Curiously, binning into a non-prime number of bins does seem to reduce the
 (small-amplitude) noise.
 Below is the binning into 720 bins.
\layout Standard


\begin_inset Graphics
	filename rdist-720-4K-irred.png

\end_inset 


\layout Standard

Following the usual laws of statistics, one expects that increasing the
 sample size reduces the noise.
 This is true in an absolute sense, but not a relative sense.
 The graph below shows 720 bins holding all irreducible rationals with denominat
ors less than 16000.
 The absolute amplitude has been reduced by over a factor of ten compared
 to the previous graphs; however, there is relatively far more power in
 the higher frequencies.
 There are also still-visible noise peaks near 1/2, 1/3, and 2/3'rds, as
 well as at 0 and 1.
 
\layout Standard


\begin_inset Graphics
	filename rdist-720-16K-irred.png

\end_inset 


\layout Standard

It sure would be nice to develop a generalized theory that can work with
 these peculiar results, and in particular, giving insight into what's happening
 near 1/2 and giving a quantitative description of the spectra near 1/3
 and 2/3, etc.
 In particular, the very first graph of this section has very clear self-similar
ity properties; its very much a fractal, more obviously so than the later
 graphs.
 What is the fractal dimension? What is the symmetry group involved? Is
 it indeed a subgroup of the Modular Group, as the following chapter would
 seem to suggest? (this should be an easy qustion to answer, I just haven't
 done the calculation yet).
 More importantly, why does the modular group show up when one is counting
 rationals? What is it about rational numbers that makes them so hyperbolic?
\layout Standard

As a side-effect, 
\layout Section

The Minkowski Question Mark Function
\layout Standard

This section explores a peculiar mapping involving Farey Numbers.
 Refered to as the Minkowski Question Mark, it is well-defined for all real
 numbers and maps the unit interval into, and onto, the unit interval.
 It is continuous and monotonic.
 The map, pictured below, is highly self-similar.
 It is also highly singular: all of its derivatives vanish on the rationals.
 Its self-similarity group can be clearly defined, and essentially that
 of period-doubling iterated maps, such as the Mandelbrot Set.
 The fact that it involves the Farey numbers is essentially the 
\begin_inset Quotes eld
\end_inset 

explanation
\begin_inset Quotes erd
\end_inset 

 for why Farey Numbers occur in period-doubling maps.
 
\layout Standard


\begin_inset Graphics
	filename fgraph.png

\end_inset 


\layout Subsection

Definition of the Question Mark Function
\layout Standard

The Minkowski Question Mark map can be constructed in several ways.
 In all of these constructions, it can be understood to be the mapping between
 the Stern-Brocot Tree (sometimes called the Farey Tree) and the tree of
 real numbers expressed as binary, base-2, dyadic fractions.
 The Stern-Brocot Tree is the tree on which the Farey mediants are naturally
 organized, and is most easily explained with a picture:
\layout Standard


\begin_inset Graphics
	filename fareytr.jpg

\end_inset 


\layout Standard

(See also the presenatation on 
\begin_inset LatexCommand \url[Stern Brocot Trees]{http://www.cut-the-knot.org/blue/Stern.shtml}

\end_inset 

 at Cut-the-Knot.) The dyadic tree has the same shape, except that the second
 row holds the values 1/4 and 3/4, and the next row the values 1/8, 3/8,
 5/8 and 7/8, and so on.
 The dyadic tree holds values that are the arithmetic average, rather than
 the mediant, of the parent values.
 Both trees are 'binary' in the sense that each branch splits into two;
 we use the term 'dyadic tree' for the one that holds the 'dyadic' numbers
 
\begin_inset Formula $p/2^{k}$
\end_inset 

.
\layout Standard

We denote the values of the Minkowski Question Mark function as as 
\begin_inset Formula $?(x)$
\end_inset 

.
 Equating the Stern-Brocot Tree and the Dyadic Tree literally, one gets
 a recursive definition.
 Start by defining 
\begin_inset Formula $?(0)=0$
\end_inset 

 and 
\begin_inset Formula $?(1)=1$
\end_inset 

.
 Then, for a pair of Farey fraction parents 
\begin_inset Formula $p/q$
\end_inset 

 and 
\begin_inset Formula $p'/q'$
\end_inset 

, it equates the Farey mediant to the arithmetic average:
\begin_inset Formula \[
?\left(\frac{p+p'}{q+q'}\right)=\frac{1}{2}\left[?\left(\frac{p}{q}\right)+?\left(\frac{p'}{q'}\right)\right]\]

\end_inset 

Thus, starting with 
\begin_inset Formula $\frac{0}{1}$
\end_inset 

 and 
\begin_inset Formula $\frac{1}{1}$
\end_inset 

 at the root of the Farey Tree, we have 
\begin_inset Formula $?\left(\frac{0+1}{1+1}\right)=?\left(\frac{1}{2}\right)=\frac{1}{2}\left[?\left(\frac{0}{1}\right)+?\left(\frac{1}{1}\right)\right]=\frac{1}{2}$
\end_inset 

.
 Next, we see the Farey number 1/3 is mapped to the binary 1/4, and so on:
 one quickly sees 
\begin_inset Formula $?\left(1/n\right)=2^{-n+1}$
\end_inset 

.
 Similarly, 2/3 maps to 3/4, and 
\begin_inset Formula $?(n/(2n-1))=2^{-1}+2^{-n}$
\end_inset 

.
 In general, a rational 
\begin_inset Formula $p/q$
\end_inset 

 maps to 
\begin_inset Formula $?(p/q)=m\cdot2^{-n}$
\end_inset 

 for some integers 
\begin_inset Formula $m,n$
\end_inset 

 (every rational occurs exactly once on the Stern-Brocot Tree).
 
\layout Standard

An alternate, non-recursive definition for the Question Mark is based on
 continued fractions.
 Starting with the expansion 
\begin_inset Formula $x=[a_{1},a_{2},...]$
\end_inset 

, one writes 
\begin_inset Formula \[
?(x)=2\sum_{k=1}\left(-1\right)^{k}\;2^{-(a_{1}+a_{2}+...+a_{k})}\]

\end_inset 

 This sum can be visualized as a count of an alternating sequence of 0's
 and 1's in the binary expansion of 
\begin_inset Formula $?(x)$
\end_inset 

: 
\begin_inset Formula \[
?(x)=\begin{array}{ccccc}
0.\underbrace{000...0} & \underbrace{11..1} & \underbrace{00..0} & \underbrace{11..1} & \underbrace{00..0}1..\\
a_{1}-1 & a_{2} & a_{3} & a_{4} & a_{5}\end{array}\]

\end_inset 

In this expnasion, it is useful to remember that 
\begin_inset Formula $0.111111...=1.0000...$
\end_inset 

, in case one has an odd number of terms in the continued fraction expansion.
\layout Standard

This sequence of 1's and 0's can be understood to be the set of directions
 for navigating a tree: on encountering a 0, take the left branch, else
 take the right branch.
 Thus, we can write 
\begin_inset Formula $0.011=LRR$
\end_inset 

.
 Navigating to this spot on the Stern-Brocot Tree, we find 2/5'ths.
 Navigating to this same position on the Dyadic Tree wee get 3/8'ths.
 Thus, 
\begin_inset Formula $?(2/5)=3/8$
\end_inset 

.
\layout Standard

There is also a well-known representation of the Stern-Brocot Tree on the
 lattice 
\begin_inset Formula $\mathbb{Z\mathbb{\times Z}}$
\end_inset 

, where a fraction 
\begin_inset Formula $p/q$
\end_inset 

 is denoted as the ordered pair 
\begin_inset Formula $(p,q)$
\end_inset 

.
 In this representation, the left-right navigation operators 
\begin_inset Formula $L$
\end_inset 

 and 
\begin_inset Formula $R$
\end_inset 

 have the values 
\begin_inset Formula $L=\left(\begin{array}{cc}
1 & 0\\
1 & 1\end{array}\right)$
\end_inset 

 and 
\begin_inset Formula $R=\left(\begin{array}{cc}
1 & 1\\
0 & 1\end{array}\right)$
\end_inset 

 and thus positions are given as elements of 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

.
 Maybe we'll elaborate on this later xxxx.
 To do...
 elaborate.
\layout Standard

To summarize, it is this expansion in binary digits that provides the underlying
 connection between period-doubling maps, such as the Mandelbrot Set, and
 Farey Numbers.
 Binary expansions, or code-words, occur naturally in the analysis of Duoady-Hub
bard landing rays.
 We'll demonstrate an explicit mapping in a later section.
\layout Subsection

Some Curious Properties of the Question Mark 
\layout Standard

The Question Mark has the curious property that it maps quadratic irrationals
 to rational numbers.
 A quadratic irrational is a number of the form m 
\begin_inset Formula $p/q+m\sqrt{D}/n$
\end_inset 

 for integers 
\begin_inset Formula $p,q,m,D,n$
\end_inset 

.
 Continued fractions whose expansions become eventually periodic are mapped
 to binary strings that become eventualy periodic.
 The later are clearly just the binary expansions of rationals whose denominator
 is not a power of 2.
 The former are quadratic irrationals, which is known from the theory of
 Pellian equations: It turns out that every quadratic irrational has a continued
 fraction expansion that becomes eventually periodic.
 Note that, as a side effect, this proves that quadratic irrationals are
 countable in the same way that rationals are.
\layout Standard

The Minkowski Question Mark has some very curious analytic properties: the
 mapping is continuous everywhere.
 It is also infinitely differentiable on every rational, and all derivatives
 vanish at every rational; yet the mapping is strictly montonically increasing.
 Clearly, the function is singular on irrationals.
 Its hard to define just how.
 (xxxx Blah blah need to define how).
\layout Standard

If there is a 3-adic or p-adic generalization of the Minkowski Question
 Mark, it is not obvious; one 'obvious' generalization is 
\layout Standard


\begin_inset Formula \[
\sum_{k=1}\left(-1\right)^{k}\;3^{-(a_{1}+a_{2}+...+a_{k})}\]

\end_inset 

but its highly discontinuous.
 Other generalizations based on roots of unity in the complex plane also
 don't seem to work.
 One might be able to get traction by looking at groups that have 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

 as a subroup but also have some 
\begin_inset Formula $p$
\end_inset 

-fold symmetry.
\layout Subsection

Symmetries of the Question Mark
\layout Standard

It should be immediately appearent from the picture of the Question Mark
 that it is highly self-similar, and thus should have a group of symmetries.
 Below, we give an explicit presentation of this group, which turns out
 to be the Modular Group Gamma.
 After breifly presenting the modular group a bit, we point out that the
 'interesting' subset of the group, that is, 'interesting' as far as fractals
 are concerned, can be best enumerated as 
\begin_inset Formula $\mathbb{Q}\otimes\mathbb{N}\otimes\mathbb{Z}_{2}$
\end_inset 

.
 This enumeration will help cement that the modular group is the symmetry
 group of the Mandelbrot Set.
 I'm enamored of this development, because the popular literature on fractals
 always talks about self-similarity without ever actually giving the group
 structure that's involved.
 The goal here is to rectify this omission.
 
\layout Standard

We start by noticing that for any real number 
\begin_inset Formula $x$
\end_inset 

 having the continued fraction expansion 
\begin_inset Formula $x=[a_{1},a_{2},...]$
\end_inset 

, that 
\begin_inset Formula $g(x)=x/(1+x)=[a_{1}+1,a_{2},...]$
\end_inset 

 .
 By the definition of 
\begin_inset Formula $?(x)$
\end_inset 

 one sees immediately that 
\begin_inset Formula $g$
\end_inset 

 is a homomorphism of the Question Mark: 
\begin_inset Formula $(?\circ g)(x)=?(g(x))=?(x)/2$
\end_inset 

.
 Thus, 
\begin_inset Formula $g$
\end_inset 

 represents one of the generators of the symmetry group.
 Denoting repeated iterations of 
\begin_inset Formula $g$
\end_inset 

 by 
\begin_inset Formula $g^{n}$
\end_inset 

 we have 
\begin_inset Formula $g^{n}(x)=x/(1+nx)$
\end_inset 

.
 Equivalently, for a continued fraction, we have 
\begin_inset Formula \[
g^{n}([a_{1},a_{2},..])=[a_{1}+n,a_{2},...]\]

\end_inset 

 Iterating under the questino mark gives 
\begin_inset Formula $?(x/(1+nx))=?(x)/2^{n}$
\end_inset 

.
 The generator 
\begin_inset Formula $g$
\end_inset 

 maps intervals to intervals, specifically 
\begin_inset Formula $g^{n}:[[0,1]]\rightarrow[[0,\frac{1}{n+1}]]$
\end_inset 

 where we use the non-standard notation 
\begin_inset Formula $[[]]$
\end_inset 

 to denote an interval, to avoid confusion with 
\begin_inset Formula $[]$
\end_inset 

 for continued fraction expansions.
 On the dyadic side, we have 
\begin_inset Formula $(?g^{n}):[[0,1]]\rightarrow[[0,1/2^{n}]]$
\end_inset 

.
 
\layout Standard

One gets the general symmetry group 
\begin_inset Formula $\Gamma$
\end_inset 

 by combining with the reflection operator embodied in the left-right symmetry:
 
\begin_inset Formula $?(1-x)=1-?(x)$
\end_inset 

 which we denote with 
\begin_inset Formula $r(x)=1-x$
\end_inset 

.
 Note that 
\begin_inset Formula $r$
\end_inset 

 commutes with 
\begin_inset Formula $?$
\end_inset 

 as we have 
\begin_inset Formula $(?\circ r)(x)=(r\circ?)(x)$
\end_inset 

.
 Thus, for example, 
\begin_inset Formula \[
(?rg^{n})(x)=(r?g^{n})(x)=r\left(\frac{1}{2^{n}}?\right)(x)=1-?(x)/2^{n}=?\left(r\left(\frac{x}{1+nx}\right)\right)=?\left(\frac{1+(n-1)x}{1+nx}\right)\]

\end_inset 

 shows that 
\begin_inset Formula $rg^{n}$
\end_inset 

 is the group element that, under 
\begin_inset Formula $?$
\end_inset 

, maps 
\begin_inset Formula $[[0,1]]\rightarrow[[1,1-1/2^{n}]]$
\end_inset 

.
 We can now write a general group element as 
\begin_inset Formula $\gamma\equiv g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}$
\end_inset 

.
 Applying the above process, it is relatively straightforward to see that
 
\begin_inset Formula \[
(?\gamma)(x)=(?g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}})(x)=\frac{1}{2^{a_{1}}}-\frac{1}{2^{a_{1}+a_{2}}}+\frac{1}{2^{a_{1}+a_{2}+a_{3}}}-...+(-)^{N+1}\frac{?(x)}{2^{a_{1}+a_{2}+a_{3}+...+a_{N}}}\]

\end_inset 

 To see the other leg of the homomorphism commuative diagram, we start by
 observing that we can write 
\begin_inset Formula $g^{n}(x)$
\end_inset 

 itself as a continued fraction: 
\begin_inset Formula \[
g^{n}(x)=\frac{1}{n+\frac{1}{x}}=[n,x]\]

\end_inset 

 In the same vein, we have 
\begin_inset Formula $(rg^{n})(x)=[1,n-1,x]$
\end_inset 

 and, with a slight abuse:
\begin_inset Formula \[
r(x)=\frac{1}{1+\frac{1}{-1+\frac{1}{x}}}=[1,-1,x]\]

\end_inset 

 Continuing this excercise, one finds that
\begin_inset Formula \[
\gamma(x)=(g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}})(x)=[a_{1}+1,a_{2},a_{3},...,a_{N-1},a_{N}-1,x]\]

\end_inset 

 which is recognizable as an element of the group 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

.
 We present this group next.
\layout Subsection

The Modular Group Gamma or 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 


\layout Standard

The modular group gamma is normally defined by its canonical representation
 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

.
 In this standard representation, a general group element is representated
 by 
\begin_inset Formula \[
\gamma=\left(\begin{array}{cc}
a & b\\
c & d\end{array}\right)\]

\end_inset 

 with 
\begin_inset Formula $a,b,c,d$
\end_inset 

 being integers, and 
\begin_inset Formula $\det\gamma=ad-bc=1$
\end_inset 

.
 Elements of this group are isomorphic to a certain set of Mobius transforms
 on the upper-half complex plane; the isomorphism is given by 
\begin_inset Formula $\gamma(x)=(ax+b)/(cx+d)$
\end_inset 

.
 The group elements are generated by a pair of generators.
 One generator generates the subgroup of two elements 
\begin_inset Formula $\mathbb{Z}_{2}\equiv\mathbb{Z}/\left(2\mathbb{Z}\right)$
\end_inset 

 and the other generates the subgroup 
\begin_inset Formula $\mathbb{Z}$
\end_inset 

.
 One can choose several different representations for the generators; the
 choice that is consistent with the previous section is 
\begin_inset Formula \[
g=\left(\begin{array}{cc}
1 & 0\\
1 & 1\end{array}\right)\;\textrm{ and }\; r=\left(\begin{array}{cc}
-1 & 1\\
0 & 1\end{array}\right)\]

\end_inset 

 This matrix representation of the generators can be used to manipulate
 and evaluate continued fractions; indeeed, the modular group is known as
 being one way to conveniently work with continued fractions.
 So, for example, we've already noted above that
\begin_inset Formula \[
g([a_{1},a_{2},...])=[a_{1}+1,a_{2},...]\]

\end_inset 

 Similarly, the action of 
\begin_inset Formula $r$
\end_inset 

 is can be written as 
\begin_inset Formula \[
r([a_{1},a_{2},..])=\left\{ \begin{array}{ccc}
\;[1,a_{1}-1,a_{2},..] & \;\textrm{\; for \;} & a_{1}\neq1\\
\;[a_{2}+1,a_{3},...] & \textrm{\;\; for \;} & a_{1}=1\end{array}\right.\]

\end_inset 

The operator to insert a digit 
\begin_inset Formula $n\geq1$
\end_inset 

 at the front of the continued fraction expansion is thus 
\begin_inset Formula \[
(g^{n-1}rg)([a_{1},a_{2},...])=[n,a_{1},a_{2},...]\]

\end_inset 

which we can immediately verify as
\begin_inset Formula \[
(g^{n-1}rg)(x)=\left(\left(\begin{array}{cc}
1 & 0\\
n-1 & 1\end{array}\right)\left(\begin{array}{cc}
-1 & 1\\
0 & 1\end{array}\right)\left(\begin{array}{cc}
1 & 0\\
1 & 1\end{array}\right)\right):(x)=\left(\begin{array}{cc}
0 & 1\\
1 & n\end{array}\right):(x)=\frac{1}{n+x}\]

\end_inset 

 Here we introduced 
\begin_inset Formula $:$
\end_inset 

 to denote the apply operator for the matrices; that is, 
\begin_inset Formula \[
\left(\begin{array}{cc}
a & b\\
c & d\end{array}\right):(x)=\frac{ax+b}{cx+d}\]

\end_inset 

 It should be clear that we can now build up the continued fraction as desired
 with this insertion operator acting on zero: 
\begin_inset Formula \[
(g^{j-1}rg)(g^{k-1}rg)(g^{m-1}rg)...(x)=(g^{j-1}rg^{k}rg^{m}rg...)(x)=[j-1,k,m,...,x]\]

\end_inset 


\layout Standard

One can also find the append operator, which we find by examining
\begin_inset Formula \[
[a_{1},a_{2},...,a_{N},g^{k}(x)]=[a_{1},a_{2},...,a_{N}+k,x]\]

\end_inset 

 and 
\begin_inset Formula \[
[a_{1},a_{2},...,a_{N},r(x)]=[a_{1},a_{2},...,a_{N}+1,-1,x]\]

\end_inset 

 We use these to construct the appending operator 
\begin_inset Formula $(g^{-1}rg^{k+1})(x)=(kx+1)/x$
\end_inset 

 which, for 
\begin_inset Formula $k\geq1$
\end_inset 

, acts as 
\begin_inset Formula \[
[a_{1},a_{2},...,a_{N},(g^{-1}rg^{k+1})(x)]=[a_{1},a_{2},...,a_{N},k,x]\]

\end_inset 

 We can thus build up continued fractions by appending at the back, starting
 from 
\begin_inset Formula $(g^{-1}rg)(x)=1/x=[x]$
\end_inset 

 as follows: 
\begin_inset Formula \[
(g^{-1}rg)(g^{-1}rg^{j+1})(g^{-1}rg^{k+1})(g^{-1}rg^{m+1})...(x)=(g^{j}rg^{k}rg^{m}rg...)(x)=[j,k,m,...,x]\]

\end_inset 

 arriving at the same answer as before.
\layout Subsection

Fractal Symmetry and the Subset 
\begin_inset Formula $\mathbb{Q}\otimes\mathbb{N}\otimes\mathbb{Z}_{2}$
\end_inset 

 of the Modular Group
\layout Standard

Every group element of 
\begin_inset Formula $SL\left(2,\mathbb{Z}\right)$
\end_inset 

 can be decomposed into a combination of the 
\begin_inset Formula $g$
\end_inset 

 and 
\begin_inset Formula $r$
\end_inset 

 generators, of the form 
\begin_inset Formula $g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}$
\end_inset 

 for integers 
\begin_inset Formula $a_{k}\in\mathbb{Z}$
\end_inset 

.
 We've already discovered the relationship between the modular group and
 continued fractions, which we gave above as 
\begin_inset Formula \[
\gamma(x)=(g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}})(x)=[a_{1}+1,a_{2},a_{3},...,a_{N-1},a_{N}-1,x]\]

\end_inset 

 We saw that this relation gives us the isomorphisms of the Minkowski Question
 Mark; let us now look at this a little more crefully and precisely, since,
 among other things, we need to define the domain and range over which the
 isomorphism is valid.
\layout Standard

First, let us consider the group elements with 
\begin_inset Formula $a_{1}\geq0$
\end_inset 

, 
\begin_inset Formula $a_{2}\geq1$
\end_inset 

, ...
 
\begin_inset Formula $a_{N-1}\geq1$
\end_inset 

, 
\begin_inset Formula $a_{N}\geq0$
\end_inset 

.
 When the coefficients are zero or positive like this, we find that 
\begin_inset Formula $\gamma(x)$
\end_inset 

 maps the unit interval into strictly small intervals; 
\shape italic 
i.e.

\shape default 
 that 
\begin_inset Formula $0<\gamma(0),\gamma(1)<1$
\end_inset 

.
 One endpoint of the interval are given by the rational 
\begin_inset Formula $\gamma(0)=[a_{1}+1,a_{2},a_{3},...,a_{N-1}]$
\end_inset 

 (note the missing 
\begin_inset Formula $a_{N}$
\end_inset 

).
 The other endpoint is 
\begin_inset Formula $\gamma(1)=[a_{1}+1,a_{2},a_{3},...,a_{N}]$
\end_inset 

 when 
\begin_inset Formula $a_{N}\geq1$
\end_inset 

, although it must be written as 
\begin_inset Formula $\gamma(1)=[a_{1}+1,a_{2},a_{3},...,a_{N-2}]$
\end_inset 

 when 
\begin_inset Formula $a_{N}=0$
\end_inset 

.
 This last special case is really just a reversal of the two endpoints.
 For such a 'shrinking' 
\begin_inset Formula $\gamma$
\end_inset 

, we can now write the isomorphism of the question mark as 
\begin_inset Formula \[
?(\gamma(x))=?(\gamma(0))+\frac{\left(-1\right)^{N+1}}{\left(2^{a_{1}+a_{2}+...+a_{N}}\right)}?(x)\]

\end_inset 


\layout Standard

The best way of understanding this isomorphism is to think of it as an isomorphi
sm of intervals, where we can pick one end of the interval, but are a bit
 more constrained in picking the other end.
 That is, we can pick an arbitrary 
\begin_inset Formula $\gamma(0)=p/q\in\mathbb{Q}$
\end_inset 

.
 We get the other end of the interval by picking 
\begin_inset Formula $a_{N}\in\mathbb{N}$
\end_inset 

 a positive integer.
 Having thus specified the interval, we can, for good measure, choose to
 exchange the endpoints, that is, pick one of 
\begin_inset Formula $\left\{ 1,r\right\} \in\mathbb{Z}_{2}$
\end_inset 

.
 To summarize, this set of isomorphisms of the question mark can be enumerated
 by 
\begin_inset Formula $\mathbb{Q}\otimes\mathbb{N}\otimes\mathbb{Z}_{2}$
\end_inset 

, which we'd like to call the fundamental set of symmetries.
 Note that this property of being able to freely pick one endpoint, but
 being a bit more contstrained with the other is a very important property
 of this symmetry.
 
\series bold 
\emph on 
This property is the fundamental property of self-similar objects and fractals
 in general: one can freely pick which copy one is to be self-similar with,
 but then after that, one has little further freedom.

\series default 
\emph default 
 This is what makes fractals be what they are.
 
\layout Standard

So far, we've only enumerated some, but not all of the modular group.
 The inverse of our generator 
\begin_inset Formula $g$
\end_inset 

 is 
\begin_inset Formula $g^{-1}=\left(\begin{array}{cc}
1 & 0\\
-1 & 1\end{array}\right)$
\end_inset 

.
 For the group element 
\begin_inset Formula $\gamma=g^{a_{1}}rg^{a_{2}}r...rg^{a_{N}}$
\end_inset 

 we can quickly see that the inverse is 
\begin_inset Formula $\gamma^{-1}=g^{-a_{N}}rg^{-a_{N-1}}r...rg^{-a_{1}}$
\end_inset 

.
 Its easy to see that these define the inverse mappings of smaller intervals
 onto the unit interval.
 Note that one needs to be careful when working with 
\begin_inset Formula $\gamma^{-1}(x)$
\end_inset 

 because this has poles that are just outside of the interval of the mapping.
 That is, the domain of the isomorphism is defined only on the interval
 of the mapping, and not the whole unit interval (its the range, not the
 domain, that is the whole unit interval).
 These inverse mappings can also be enumerated by 
\begin_inset Formula $\mathbb{Q}\otimes\mathbb{N}\otimes\mathbb{Z}_{2}$
\end_inset 

, of course.
 
\layout Standard

All of the remaining group elements that we haven't yet discussed are those
 with a mixture of positive and negative values for the 
\begin_inset Formula $a_{k}$
\end_inset 

.
 These group elements can be obtained by alternately concatenating interval-shri
nking and interval-expanding group elements.
 One has to be considerably more careful in keeping track of the domains
 and ranges of each mapping.
 We claim (without proof at this time) that these types of mappings do not
 introduce any new types of intervals, and so enumeration originally provided,
 
\emph on 
viz.
 
\emph default 

\begin_inset Formula $(\mathbb{Q}\otimes\mathbb{N}\otimes\mathbb{Z}_{2})\oplus(\mathbb{Q}\otimes\mathbb{N}\otimes\mathbb{Z}_{2})$
\end_inset 

 is essentially unchanged.

\emph on 
 
\layout Standard

ToDo: give for example 
\begin_inset Formula $(rg^{-2}rg^{2})(x)=x+2$
\end_inset 

 and discuss what this means for the question mark, and how we should treat
 this (to modulo or not to modulo?)
\layout Standard

Note also that if we limit ourselves to alternately shrinking and growing
 interval maps that are stricly contained one inside the other, then we
 find a proper subroup of the modular group, whose group elements are now
 enumerated by pairs of intervals or .xxx.
 be careful here .
 Again, the domain and range of these sub-symmetries are now limited.
 
\layout Standard

Thus I think we can now conclude that 
\begin_inset Formula $\gamma$
\end_inset 

 is an isomorphism of 
\begin_inset Formula $?$
\end_inset 

, mapping the unit interval into a subinterval, completing the proof.
 xxxx finish writing these conclusions.
\layout Subsection

Symmetries Induced on 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 and 
\begin_inset Formula $\mathbb{R}$
\end_inset 

 (and 
\begin_inset Formula $\mathbb{Q}_{p}$
\end_inset 

?)
\layout Standard

Note that the correspondances presented here induce fractal isomorphisms
 of 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 onto itself.
 This was already hinted at in the previous section, where we were trying
 to just plain-old count the rationals, and not getting what every middle
 and high-school teacher teaches students to expect.
 This symmetry would also imply a symmetry on the closure in reals 
\begin_inset Formula $\mathbb{R}$
\end_inset 

.
 Exactly what it implies for the non-Archimedean closures 
\begin_inset Formula $\mathbb{Q}_{p}$
\end_inset 

 is not yet clear to me.
 This symmetry is never made use of in classical analysis.
 
\layout Standard

The field structure of the rationals in turn induces a field structure on
 a certain subroup of the modular group, specfically, the interval-mapping
 subgroup.
 Albeit this would be a highly fractal structure ...
 I have no clue of what this field structure implies for modular forms or
 goodies like the Wierstrass elliptic integrals, etc.
 This would be a great TBD with a whole-lotta partyin goin on.
\layout Section

Symmetry of the Mandelbrot Set and the Circle Map
\layout Standard

To be written.
 First we need to explain how to count with Farey numbers on the M-Set.
 Here is a picture stolen from Robert L.
 Devaney's website 
\begin_inset LatexCommand \url[The Fractal Geometry of the Mandelbrot Set ]{}

\end_inset 

 :
\layout Standard


\begin_inset Graphics
	filename farey-bud-numbers.gif

\end_inset 


\layout Standard

This mapping and method of counting on the buds is well-known in the literature
 and is explored in many ways.
\layout Standard

Next we note that enumerating the group elements of the modular group as
 
\begin_inset Formula $\mathbb{Q\times\mathbb{N}}$
\end_inset 

 plays directly into the celebrated self-similarity of the Mandelbrot set.
\layout Standard

What does this mean for the symmetries of the Mandelbrot set? it means that
 the modular group maps buds to buds.
 Note, however, that the 
\begin_inset Formula $\mathbb{Q\times\mathbb{N}}$
\end_inset 

 parameterization of the modular group means that one can map one bud onto
 any another, but that the mapping has to be onto the whole bud, and not
 just a portion of it.
 Put another way, it is a mapping of intervals to intervals.
 However, we can't just map any-old-interval anywhere we want.
 We can map an interval to any starting point that we wish (this is the
 
\begin_inset Formula $\mathbb{Q}$
\end_inset 

 part of the symmetry, but after specifying the starting point, we have
 only a discrete set of intrvals we can map to: this is the 
\begin_inset Formula $\mathbb{N}$
\end_inset 

 part of the enumeration.
 The buds appear discretely on the boundaries of the main cardiod.
\layout Subsection

Douady-Hubbard Rays
\layout Standard

Douady Hubbard rays are a mapping of the unit circle to the boundary of
 the Mandelbrot Set.
 One of the properties is that a pair of rays pinches off each bud of the
 M-Set.
 Note that both of the rays occur at external angles that are also rationals.
 This now induces some additional symmetries on the rational numbers, since
 each bud can be labelled with a rational, and thus, for each rational,
 we associate the upper and lower rays.
 These two map are highly discontinuous.
 But that is OK, because the discontinuities pinch off the bud in the middle.
 We use the code-word substituion techniques of Doaudy-Hubbard to paste
 into the discontinuities.
 Since we are free to paste in any code-word desired, we have, in a certain
 sense, total and complete randomness, which is then propagated everywhere
 through the self-similarity.
 
\layout Standard

Here is a bizarro philosophical thought: we have complete freedom to choose
 the codewords to be pasted into the period-doubling symmetry, in the sense
 of philosophical free-will: we can choose as we wish.
 The result of the application of our free will is multiplied through the
 modular group so that choice now appears everywhere among the rationals.
 But we know that the closure of rationals is the reals, and we know that
 the reals are 
\begin_inset Quotes eld
\end_inset 

unknowable
\begin_inset Quotes erd
\end_inset 

 in the Turing-computable sense.
 Thus, we conclde that the application of free-choice results in something
 unknowable.
 How strange.
 
\layout Standard

Here's how code-word substitution works: start with the dyadic (base-2)
 expansion for 
\begin_inset Formula $0\leq x\leq1$
\end_inset 


\begin_inset Formula \[
x=\sum_{n=1}^{\infty}\frac{a_{n}}{2^{n}}=0.a_{1}a_{2}a_{3}...\]

\end_inset 

 where the 
\begin_inset Formula $a_{k}$
\end_inset 

 can only take on the values 0 and 1.
 Then pick any two integers 
\begin_inset Formula $h,l\in\mathbb{N}$
\end_inset 

 and a third integer 
\begin_inset Formula $m$
\end_inset 

 such that 
\begin_inset Formula $h,l<2^{m}$
\end_inset 

 is satisfied (alternately, we start by picking 
\begin_inset Formula $m$
\end_inset 

 first, then picking 
\begin_inset Formula $h,l$
\end_inset 

 to satisfy this).
 We then substitute the value of 
\begin_inset Formula $0$
\end_inset 

 in the dyadic expansion of 
\begin_inset Formula $x$
\end_inset 

 with 
\begin_inset Formula $l$
\end_inset 

 and the binary value of 
\begin_inset Formula $1$
\end_inset 

 in the expansion with 
\begin_inset Formula $h$
\end_inset 

, padding each appropriately:
\begin_inset Formula \[
B_{h,l,m}(x)=\sum_{n=1}^{\infty}\frac{ha_{n}+l(1-a_{n})}{2^{n}2^{nm}}\]

\end_inset 

 which we now see as a highly discontinuous function of 
\begin_inset Formula $x$
\end_inset 

.
 To get a better idea of why its called 
\begin_inset Quotes eld
\end_inset 

codeword substitution
\begin_inset Quotes erd
\end_inset 

, lets work an example.
 Let 
\begin_inset Formula $x=0.10101010101..._{2}$
\end_inset 

 and pick 
\begin_inset Formula $m=4$
\end_inset 

 and 
\begin_inset Formula $h=7$
\end_inset 

 and 
\begin_inset Formula $l=4$
\end_inset 

.
 Note that, in binary, 
\begin_inset Formula $h=0111_{2}$
\end_inset 

 and 
\begin_inset Formula $l=0100_{2}$
\end_inset 

 and so we have
\begin_inset Formula \[
B_{7,3;4}(0.1010101..._{2})=0.0111\;0100\;0111\;0100\;0111\;..._{2}\]

\end_inset 

 
\layout Standard

Lets now work backwards and get the question mark: thus
\begin_inset Formula \[
?([2,1,1,1,...])=0.1010101..._{2}\]

\end_inset 

 and 
\begin_inset Formula \[
?([2,3,1,1,3,3,1,1,3,3,1,1,...])=B_{7,3;4}(0.1010101..._{2})\]

\end_inset 

 blah blah why are we doing this again?
\layout Subsection

Islands, Sinai's Tongues
\layout Standard

blah blah write this section.
\layout Standard

See the pictures of phase-locking in the Circle map at the URL 
\begin_inset LatexCommand \htmlurl[Circle Map]{http://www.linas.org/art-gallery/basic/basic.html}

\end_inset 

 and notice the similarities to the gaps pictured at 
\begin_inset LatexCommand \htmlurl[Farey Room Pictures]{http://www.linas.org/art-gallery/farey/fthumb.html}

\end_inset 

 Yada Yada.
 The mode-locked regions are called Sinai's toungues.
 This implies that the Modular Group is the symmetry group of the phase
 locked-loop (the circle map) as well as the Mandelbrot Set.
 
\layout Standard

Notice that the mode-locked regions of the circle map are exactly those
 regions that are *not* chaotic: in other words, these are the so-called
 
\begin_inset Quotes eld
\end_inset 

islands of order
\begin_inset Quotes erd
\end_inset 

 that can be found in the 
\begin_inset Quotes eld
\end_inset 

sea of chaos
\begin_inset Quotes erd
\end_inset 

.
 One of course sees such islands in other iterated equations, such as the
 iterated Feigenbaum map, and one is naturally lead to ask, is the modular
 group the symmetry group that maps islands into islands, for any period
 doubling map? What about the converse? Are there any maps, with islands,
 that do not have the Modular Form symmetry? 
\layout Standard

What about Misiurewicz points?
\layout Section

Distributions, Permutations
\layout Standard

Blah blah blah.
 Its all interconnected, isn't it?
\layout Subsection

Distribution of Rationals in the Farey Tree
\layout Standard

One way to enumerate all of the rationals is by placing them on the Farey
 Tree (or the Stern-Brocot Tree).
 One can prove that the Farey Tree enumerates all of the rationals in the
 unit interval exactly once (Proof at 
\begin_inset LatexCommand \htmlurl[Cut-the-Knot]{http://www.cut-the-knot.org/blue/Stern.shtml}

\end_inset 

).
 However, the distribution of the rationals on the Farey Tree is highly
 non-uniform, if we walk that tree breadth-first.
 The graph below shows that distribution.
\layout Standard


\begin_inset Graphics
	filename fdist-65K.png

\end_inset 


\layout Standard

Superficially, the shape of this curve seems independent of the bining;
 although, upon very close inspection, one can see that is not quite true.
 In particular, one can deduce that in the limit of an 'infinite' number
 of bins, that this 'curve' is equal to exactly zero at every rational 
\begin_inset Formula $p/q$
\end_inset 

, and infinite at every irrational.
 But no matter; for a finite number of bins, we can proceed.
\layout Standard

This shape is remarkably suggestive.
 It appears to be the derivative 
\begin_inset Formula $?'(x)=d?(x)/dx$
\end_inset 

 of the continued fraction mapping, although using classical analytic techniques
, this derivative is not definable.
 Indeed, performing a simple numeric integral of the above, and comparing
 it to the exact expression shows a perfect match, as witnessed in the graph
 below.
\layout Standard


\begin_inset Graphics
	filename farey-integral.png

\end_inset 


\layout Standard

The continued fraction mapping is infinitely differentiable on every rational,
 and all derivatives vanish at every rational; yet the mapping is strictly
 montonically increasing.
 Just examing the graph visually suggests that the derivatives must be non-zero
 
\begin_inset Quotes eld
\end_inset 

somewhere
\begin_inset Quotes erd
\end_inset 

, although its hard to define how to value these derivatives.
 Yet, visually comparing the Farey mapping to the distribution of the Farey
 Fractions, it seems that the distribution of Farey's might be a good estimate
 of that first derivative.
 Clearly, classical analytic techniques are sorely lacking and inapplicable;
 we need to find a set of tools where we can talk about and manipulate the
 so-called 'first derivative' in a meaningful way.
\layout Standard

Below is another curious picture, where we've relabelled the x axis by passing
 it through 
\begin_inset Formula $?(x)$
\end_inset 

; one could say that it is a picture of the Jacobian 
\begin_inset Formula $(?'\circ?^{-1})(x)$
\end_inset 

 
\layout Standard


\begin_inset Graphics
	filename fdist-jaco.png

\end_inset 


\layout Standard

This function appears to vanish only at the dyadics.
 Note the superficial resemblance to the Takagi-Landsberg curve (Teiji Tagaki,
 circa 1900) 
\begin_inset LatexCommand \cite{key-3}

\end_inset 

, which is constructed by positive mid-point displacements.
 One assigns geometrically smaller displacements to each level of the dyadic
 tree; that is, one picks some 
\begin_inset Formula $w<1$
\end_inset 

, and assigns to each dyadic number 
\begin_inset Formula $x=p/2^{n}$
\end_inset 

 the value 
\begin_inset Formula \[
t_{w}\left(p/2^{n}\right)=\sum_{k=0}^{n-1}w^{k}=1+w+w^{2}+...+w^{n-1}\]

\end_inset 

 One extends this curve to all reals by 'linear interpolation' between the
 dyadic values, as 
\begin_inset Formula \[
t_{w}(x)=\sum_{k=0}^{\infty}w^{k}\tau\left(2^{k}x\right)\]

\end_inset 

where 
\begin_inset Formula $\tau(x)$
\end_inset 

 is the triangle function:
\begin_inset Formula \[
\tau(x)=\left\{ \begin{array}{ccc}
2(x-\left\lfloor x\right\rfloor ) & \textrm{\; for \;} & x-\left\lfloor x\right\rfloor \leq1/2\\
2(\left\lfloor x+1\right\rfloor -x) & \textrm{\; for \;} & x-\left\lfloor x\right\rfloor >1/2\end{array}\right.\]

\end_inset 

 Note that insofar as the triangle curve is differentiable, we could say
 that the Takagi-Landsberg curve is differentiable (along 
\begin_inset Formula $x$
\end_inset 

) as well, in that it has both leftward-going and rightward-going derivatives,
 although these derivatives differ at each dyadic point.
 Note that 
\begin_inset Formula $t_{1/4}(x)=4x(1-x)$
\end_inset 

 is a parabola (the mid-point subdivision construction of a parabola is
 attributed to Archimedes
\begin_inset LatexCommand \cite{key-3}

\end_inset 

).
 A prototypical Takagi-Landsberg curve is pictured below:
\layout Standard


\begin_inset Graphics
	filename takagi.png

\end_inset 


\layout Standard

Blah blah blah...
 can replace triangle with any f(x) on the unit interval with f(0)=f(1)
 such as 
\begin_inset Formula $f(x)=(1-\cos(2\pi x))/2$
\end_inset 

 .
 however, get unusual results if f is zero on 
\begin_inset Formula $0\leq x\leq1/3$
\end_inset 

 and 
\begin_inset Formula $2/3\leq x\leq1$
\end_inset 

, at which point the takagi curve works like a cut-n-paste operator with
 a dyadic/geometric progression of sizes.
 In particular, we can mae a sawtooth by using f(x)= blah.
 
\layout Standard

Note that the eigenfunctions of the Bernoulli Frob-Perron are of this form.
 viz.
 Driebe.
\layout Standard

We sense intuitively that ...
 Lets now imagine the Takagi-Landsberg as if it were living on the Lie group
 
\begin_inset Formula $U(1)$
\end_inset 

, that is, it lives in the 
\begin_inset Formula $Exp$
\end_inset 

 of a tangent space.
 What is the generator function for that space? we suspect its 
\begin_inset Formula $(?'\circ?^{-1})(x)$
\end_inset 

 if we could only write it down.
\layout Standard

Lets try to undertand why blah blah blah.
\layout Standard

This is really a very curious circumstance.
 The above graphs show only the distribution of a finite number of points
 (they were, after all, computer generated).
 A finite set of points on the real number line is zero; yet we are using
 it to induce a measure that can be used for integration.
 How is this? Its as if it were an anti-Cantor set.
\layout Subsection

Other Trees of Rationals
\layout Standard

Recall that we were able to construct other trees that are isomorphic to
 the Stern-Brocot tree by passing the values in the Stern-Brocot Tree through
 a ratio of polynomials, thus mapping rationals to rationals.
 Monotonically-increasing functions will always perserve monotonicity of
 the question mark.
 Other mappings, such as the cubic 
\begin_inset Formula $x^{3}-x$
\end_inset 

, are in general not globally monotonic, but they are always locally monotonic.
 In other words, 
\begin_inset Formula $?((2x-1)^{3}-x+1)$
\end_inset 

 is montonic between the same regions that 
\begin_inset Formula $(2x-1)^{3}-x+1$
\end_inset 

 is, and thus it does not yeild a fundamentally new function.
 Thus, these ploynomial-based mappings of rationals into rationals do not
 generate another self-similar map, they are distorted versions of the Minkowski
 question mark.
\layout Standard

Here's a mapping that is continuous and is also fractally non-monotonic
 (and is thus self-similar): its 
\begin_inset Formula $x-?(x)$
\end_inset 

 which looks sine-like and we want to exhibit the cosine-like so that we
 can build up fractally-periodic basis functions.
 
\layout Standard

We can do this with the eigenfunctions of the Frobenius-Perron operator
 of the Bernoulli map.
 These eigenfunctions are 
\begin_inset Formula \[
\phi_{z,l}(x)=\sum_{n=0}^{\infty}z^{n}\exp\left(2\pi i\;2^{n}\left(2l+1\right)x\right)\]

\end_inset 

 which have eignevalue 
\begin_inset Formula $z$
\end_inset 

: that is 
\begin_inset Formula $[U_{B}\phi_{z,l}](x)=z\phi_{z,l}(x)$
\end_inset 

.
 This is old hat...
 except that now ...
 note that these are a generalization of the takagi-landsberg curve where
 we replace the triangle function with sines and cosines.
 Is there a name for these functions? 
\layout Subsection

Cantor Dusts
\layout Standard

Speaking of Cantor sets, this begs a question.
 Can we find functions that are continuous and monotinically increasing,
 yet all of whose derivatives are identically zero on a Cantor dust? I think
 we can.
 This section is also to be written.
 Sigh.
\layout Subsection

Hilbert Lattice and Permuation Groups
\layout Standard

Note that continued fractions have a representation as a lattice in the
 infinitie-dimensional Hilbert space 
\begin_inset Formula $\mathbb{N}^{\infty}=\mathbb{N\times N\times}...$
\end_inset 

 where 
\begin_inset Formula $\mathbb{N}=\mathbb{Z}^{+}$
\end_inset 

 the set of positive integers.
 Note that this implies that each point on this lattice can be given a unique
 value using the continued fraction mapping, and that each value appears
 only once on the lattice.
 In other words, the continued fraction brackets are an operator that maps
 this Hilbert space to the real numbers, i.e.
 
\begin_inset Formula $[]:\mathbb{N}^{\infty}\mathbb{\rightarrow R}$
\end_inset 

.
 What makes the 
\begin_inset Formula $[]$
\end_inset 

 operator so interesting is that it is 1-1 and onto, and is thus invertible,
 at least on the irrationals, if we brush aside a little problem with the
 rationals.
 Note that in this mapping, the number 0 is a kind-of 
\begin_inset Quotes eld
\end_inset 

essential singularity
\begin_inset Quotes erd
\end_inset 

 at 
\begin_inset Formula $\infty$
\end_inset 

, since the continued fraction expansion for 0 is 
\begin_inset Formula $0=[\infty,a_{2},a_{3},...]$
\end_inset 

 for arbitrary integers 
\begin_inset Formula $a_{k}$
\end_inset 

.
 Indeed, all rationals suffer in this way: a finite contined fraction is
 just one where 
\begin_inset Formula $\infty$
\end_inset 

 appears somewhere in the expansion, i.e.
 
\begin_inset Formula $[a_{1},a_{2},...,a_{N}]=[a_{1},a_{2},...,a_{N},\infty,a_{N+2},...]$
\end_inset 

.
 We can work around this difficulty by taking the kernel of [] and defining
 a quotient space 
\begin_inset Formula $\mathbb{N}^{\infty}/\ker[]$
\end_inset 

, and insisting that the operator 
\begin_inset Formula $[]$
\end_inset 

 is 1-1 and onto in this quotient space.
 Homework: prove that this quotient space is validly defined and has the
 needed vector-space properties.
 In the subsequent discussion, we'll intentionally confuse 
\begin_inset Formula $\mathbb{N}^{\infty}$
\end_inset 

 with this quotient space, wherever its convenient.
 In the following, we also make a convenient little confusion between the
 continued fraction map defined on the unit interval, and the map defined
 for non-negative reals: viz.
 
\begin_inset Formula $[a_{0};a_{1},a_{2},...]\equiv a_{0}+[a_{1},a_{2},...]$
\end_inset 

 where we use the semicolon to distinguish this zero'th element.
\layout Standard

Note that this lattice is a subspace of the Hilbert space of 
\begin_inset Quotes eld
\end_inset 

generalized functions
\begin_inset Quotes erd
\end_inset 

, in that any map 
\begin_inset Formula $\mu:\mathbb{N}^{\infty}\rightarrow\mathbb{R}$
\end_inset 

 induces a map 
\begin_inset Formula $\tilde{\mu}:\mathbb{R}\rightarrow\mathbb{R}$
\end_inset 

, through the isomorphic operator 
\begin_inset Formula $[]$
\end_inset 

.
 The normal definition of a generalized function is that its a map 
\begin_inset Formula $\tilde{f}:\mathcal{F}\mathbb{\rightarrow R}$
\end_inset 

 where 
\begin_inset Formula $\mathcal{F}$
\end_inset 

 is the space of ordinary functions 
\begin_inset Formula $\left\{ f\,|\, f:\mathbb{\mathbb{R}\rightarrow R}\right\} $
\end_inset 

.
 The canonical example is  the Dirac delta oprator 
\begin_inset Formula $\delta(x)$
\end_inset 

 which is zero everywhere, except at 
\begin_inset Formula $x=0$
\end_inset 

 where it is infinite.
 
\layout Standard

It seems intuitive that all other mappings from 
\begin_inset Formula $\mathbb{N}$
\end_inset 

 to 
\begin_inset Formula $\mathbb{Z}$
\end_inset 

 that satisfy this invertability property are obtainable through the action
 of the permutation group, although one should always be careful with such
 statements..
 The permutation group elements are the shift operator 
\begin_inset Formula $h(x)=\frac{1}{x}-\left\lfloor \frac{1}{x}\right\rfloor $
\end_inset 

 which acts as 
\begin_inset Formula $h:[a_{1},a_{2},a_{3},...]\mapsto[a_{2},a_{3},...]$
\end_inset 

 and the permuation operator 
\begin_inset Formula $S_{p,q}:[a_{1},...,a_{p},...,a_{q},...]\mapsto[a_{1},...,a_{q},...a_{p},...]$
\end_inset 

.
 Homework: give the analytic form for 
\begin_inset Formula $S$
\end_inset 

.
 Note that 
\begin_inset Formula $S_{p,q}(x)$
\end_inset 

 is discontinuous, but I think only on a countable set of points, and thus
 can be used to form well-defined integrals using classic techniques.
 
\layout Standard

Note that more generally, we can now define 
\begin_inset Formula $h:SL\left(2,\mathbb{Z}\right)\rightarrow SL\left(2,\mathbb{Z}\right)$
\end_inset 

 as the operator that lops off the first term of teh expansion.
 This has a kernel that contains the group element 
\begin_inset Formula $g^{n}rg$
\end_inset 

 and so we ask about the group structure that results from this.
 
\layout Standard

In particular, let us look at the family of analytic functions blah blah
 blah that is produced by invoking the permutation group on blah blah.
 What are the symmetries.
\layout Section

Conclusions
\layout Standard

Apologies for the format of this paper; its like the Picard Theorm suggests:
 this paper will touch on all possible topics an infinite number of times
 as it approaches the essential singularity of being completed.
\layout Standard

Blah Blah Blah, The modular group is the symmetry group of the hyperbolic
 plane, and trajectories on hyperbolic surfaces are known the have positive
 Lyapunov exponents, so once again, we have another curious tie into chaotic
 behvaiour.
\layout Standard

Note that this also means that all of the results from modular forms now
 have some sort of interpretation in the fractal world.
 The program is now how to map those results into statements about classical
 chaotic dynamics and more importantly, for quantum chaos.
 Do statements about Hamiltonian dynamics have corresponding statements
 in terms of modular forms? If so, what are they? What about the converse?
 
\layout Section

Open Questions
\layout Standard

Some unanswered questions of varing depth and complexity.
\layout Subsubsection

Multiplicity (Degeneracy) of Rationals
\layout Standard

If we enumerate the rationals 
\begin_inset Formula $p/q$
\end_inset 

 for all values of 
\begin_inset Formula $p,q\in[1..N]$
\end_inset 

, there will be many duplicates after reducing by eliminating common factors.
 In the limit of 
\begin_inset Formula $N\rightarrow\infty$
\end_inset 

, what is the multiplicity (degeneracy) of any given rational? What is the
 group of symmetries of the resulting fractal?
\layout Subsubsection

Sagher Enumeration
\layout Standard

Sagher enumerates rationals m/n with the integer 
\begin_inset Formula $m^{2}n^{2}/q_{1}..q_{k}$
\end_inset 

 where 
\begin_inset Formula $q_{i}$
\end_inset 

 are the prime factors of 
\begin_inset Formula $n$
\end_inset 

.
 Make a graph of this distribution.
 
\layout Subsubsection

Simplicity
\layout Standard

The simplicity 
\begin_inset Formula $w(p/q)$
\end_inset 

of a farey number is given by 
\begin_inset Formula $w(p/q)=1/pq$
\end_inset 

.
 The weighted simplicity is 
\begin_inset Formula $W(p/q)=w(p/q)2^{-N(p/q)-1}$
\end_inset 

 where 
\begin_inset Formula $N(p/q)$
\end_inset 

 is the row number on the Farey Tree.
 Make a graph of this function.
 Relate it to the rest.
 Note that the sum of 
\begin_inset Formula $w(p/q)$
\end_inset 

 on one row of the farey sums to 1, and that thus, the sum of 
\begin_inset Formula $W(p/q)$
\end_inset 

over all rationals equals 1.
 See Cut the Know for the correct attribution for this concept.
 
\layout Subsubsection

The Gauss-Kuz'min Wirsing Distribution
\layout Standard

The Gauss-Kuzmin-Wirsing (GKW) distribution gives likelyhood of the occurance
 of any given partial sum in a continued fraction expansion.
 If we were instead to flatten that distribution, and work backwards, this
 would imply the existance of a measure/distribution on the rationals.
 What is that distribution? If we were to replace the GKW distribution by
 some arbitrary (monotonically-creasing, continuous) mapping, what would
 eb corresponding measure be that is induced? Can we analyse the these measures
 in terms of the eigenfunctions of the GKW? 
\layout Subsubsection

Relation to Cryptography
\layout Standard

Cryptographic hashes are also known to distribute points randomly on the
 unit square; but they do so only on a fixed (albeit very large) lattice.
 What are the relationships between the randomness of the gap and crypto-type
 systems? For example, we could study the behaviour of the gap on all rationals
 which have the same large prime as the denominator.
 Is there a relationship to elliptic curves (which are known to be related
 to continued fractions in other ways, e.g through modular forms)? Can we
 say that the uniform distribution of gaps is somehow the 'fundamental theorm
 of cryptography', implying that there are always unbreakable codes because
 the gaps are dense on the unit square?
\layout Subsubsection

Algebraic Pellian-like Equations
\layout Standard

Given arbitrary real 
\begin_inset Formula $x,y$
\end_inset 

, one can find a sequence of rationals that converge on 
\begin_inset Formula $x$
\end_inset 

 and whose gaps converge on 
\begin_inset Formula $y$
\end_inset 

.
 Can this sequence be expressed as approximants to some algebraic equation,
 somewhat in analogy to the Pellian equations? What would that series of
 equations be?
\layout Bibliography
\bibitem [asdf]{key-1}

Here is a very similarly titled paper with a very different subject matter:
 
\begin_inset LatexCommand \htmlurl[Continued Fractions and Chaos]{http://www.cecm.sfu.ca/organics/papers/corless/confrac/html/confrac.html}

\end_inset 

 by Robert M.
 Corless
\layout Bibliography
\bibitem {key-2}

Dean Driebe Fully Chaotic Maps and Broken Time Symmetry Kluwer Academic
\layout Bibliography
\bibitem [Man88]{key-3}

Benoit Mandelbrot, in 
\emph on 
The Science of Fractal Images, ed.
 Heinz-Otto Peitgen, Dietmar Saupe,
\emph default 
 (Springer-Verlag, 1988) p.
 246
\the_end
